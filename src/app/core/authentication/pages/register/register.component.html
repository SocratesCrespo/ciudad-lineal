<div class="container">
    <div class="row">
        <div class="col-12 col-md-3"></div>
        <div class="col-12 col-md-6">
            <h1 class="text-center my-3">Registro</h1>
            <form [formGroup]="registerForm" class="form-control p-3">

                <!-- Input -->
                <div class="input my-3">
                    <div class="label">
                        <label for="publisher">¿Qué publicador eres?</label>
                    </div>
                    <select class="form-control" formControlName="publisher" id="publisher">
                        <option *ngFor=" let publlisher of publishers " [value]="publlisher.id">{{ publlisher.firstname }} {{ publlisher.lastname }}</option>
                    </select>
                    <small class="text-danger" *ngIf="registerForm.get('publisher')?.touched && registerForm.get('publisher')?.invalid || (mainError !== '' && registerForm.get('publisher')?.invalid)">Debes seleccionar un publicador</small>
                </div>

                 <!-- Input -->
                <div class="input my-3">
                    <div class="label">
                        <label for="email">Correo</label>
                    </div>
                    <input class="form-control" formControlName="email" type="text" placeholder="Correo">
                    <small class="text-danger" *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid || (mainError !== '' && registerForm.get('email')?.invalid)">Debes agregar el correo</small>
                </div>

                 <!-- Input -->
                <div class="input my-3">
                    <div class="label">
                        <label for="password">Contraseña</label>
                    </div>
                    <input class="form-control" formControlName="password" [type]=" inputPassword ? 'text' : 'password' " placeholder="Contraseña">
                    <small (click)="showPassword()" *ngIf="registerForm.get('password')?.value?.length > 0 && !inputPassword" class="p-1 displayPassword">Mostrar contraseña</small>
                    <small (click)="hidePassword()" *ngIf="registerForm.get('password')?.value?.length > 0 && inputPassword" class="p-1 displayPassword">Ocultar contraseña</small>
                    <p *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid || (mainError !== '' && registerForm.get('password')?.invalid)"><small class="text-danger">La contraseña debe tener 6 caracteres como mínimo</small></p>
                </div>

                 <!-- Input -->
                <div class="input my-3">
                    <div class="label">
                        <label for="confirmPassword">Confirmar Contraseña</label>
                    </div>
                    <input class="form-control" formControlName="confirmPassword" [type]=" inputPasswordConfirm ? 'text' : 'password' " placeholder="Confirmar Contraseña">
                    <small (click)="showPasswordConfirm()" *ngIf="registerForm.get('confirmPassword')?.value?.length > 0 && !inputPasswordConfirm" class="p-1 displayPassword">Mostrar contraseña</small>
                    <small (click)="hidePasswordConfirm()" *ngIf="registerForm.get('confirmPassword')?.value?.length > 0 && inputPasswordConfirm" class="p-1 displayPassword">Ocultar contraseña</small>
                    <p *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.invalid || (mainError !== '' && registerForm.get('confirmPassword')?.invalid)"><small class="text-danger">Debes confirmar tu contraseña</small></p>
                    <p *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.value !== registerForm.get('password')?.value"><small class="text-danger">Las contraseñas deben coincidir</small></p>
                </div>

                 <!-- Input -->
                <div *ngIf="success === false" class="input my-3">
                    <button (click)="register()" class="form-control btn btn-custom">Registrarse</button>
                </div>
                <div *ngIf="mainError && success === false" class="alert alert-danger text-center" role="alert">
                    {{ mainError }}
                </div>

                
                <div *ngIf="success === true" class="alert alert-success text-center" role="alert">
                    ¡Te has registrado correctamente!
                </div>
                <div *ngIf="success === true" class="input my-3">
                    <button [routerLink]="['/auth/login']" class="form-control btn btn-custom">Iniciar sesión</button>
                </div>

                <div class="back text-center">
                    <a href="#" [routerLink]="['/auth/login']" class="text-center text-danger">Volver</a>
                </div>
            </form>
        </div>
        <div class="col-12 col-md-3"></div>
    </div>
</div>